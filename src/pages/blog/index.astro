---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout title="Blog - Akinkunmi">
  <div class="space-y-6">
    {posts.length === 0 ? (
      <p class="text-zinc-500">No posts yet.</p>
    ) : (
      posts.map((post) => (
        <a href={`/blog/${post.slug}`} class="block">
          <h2 class="text-white underline underline-offset-4">{post.data.title}</h2>
          <p class="text-zinc-500 text-sm mt-1">{post.data.description}</p>
          <time class="text-zinc-600 text-xs mt-1 block">
            {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          </time>
        </a>
      ))
    )}
  </div>
</Layout>
